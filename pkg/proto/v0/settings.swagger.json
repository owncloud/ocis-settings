{
  "swagger": "2.0",
  "info": {
    "title": "Settings",
    "version": "1.0",
    "contact": {
      "name": "ownCloud GmbH",
      "url": "https://github.com/owncloud/ocis-settings",
      "email": "support@owncloud.com"
    },
    "license": {
      "name": "Apache-2.0",
      "url": "https://github.com/owncloud/ocis-settings/blob/master/LICENSE"
    }
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/v0/settings/assignments-add": {
      "post": {
        "operationId": "AssignRoleToUser",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoAssignRoleToUserResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoAssignRoleToUserRequest"
            }
          }
        ],
        "tags": [
          "RoleService"
        ]
      }
    },
    "/api/v0/settings/assignments-list": {
      "post": {
        "operationId": "ListRoleAssignments",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoListRoleAssignmentsResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoListRoleAssignmentsRequest"
            }
          }
        ],
        "tags": [
          "RoleService"
        ]
      }
    },
    "/api/v0/settings/assignments-remove": {
      "post": {
        "operationId": "RemoveRoleFromUser",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoRemoveRoleFromUserRequest"
            }
          }
        ],
        "tags": [
          "RoleService"
        ]
      }
    },
    "/api/v0/settings/bundle-get": {
      "post": {
        "operationId": "GetSettingsBundle",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoGetSettingsBundleResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoGetSettingsBundleRequest"
            }
          }
        ],
        "tags": [
          "BundleService"
        ]
      }
    },
    "/api/v0/settings/bundle-save": {
      "post": {
        "operationId": "SaveSettingsBundle",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoSaveSettingsBundleResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoSaveSettingsBundleRequest"
            }
          }
        ],
        "tags": [
          "BundleService"
        ]
      }
    },
    "/api/v0/settings/bundles-add-setting": {
      "post": {
        "operationId": "AddSettingToSettingsBundle",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoAddSettingToSettingsBundleResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoAddSettingToSettingsBundleRequest"
            }
          }
        ],
        "tags": [
          "BundleService"
        ]
      }
    },
    "/api/v0/settings/bundles-list": {
      "post": {
        "operationId": "ListSettingsBundles",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoListSettingsBundlesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoListSettingsBundlesRequest"
            }
          }
        ],
        "tags": [
          "BundleService"
        ]
      }
    },
    "/api/v0/settings/bundles-remove-setting": {
      "post": {
        "operationId": "RemoveSettingFromSettingsBundle",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoRemoveSettingFromSettingsBundleRequest"
            }
          }
        ],
        "tags": [
          "BundleService"
        ]
      }
    },
    "/api/v0/settings/roles-list": {
      "post": {
        "operationId": "ListRoles",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoListSettingsBundlesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoListSettingsBundlesRequest"
            }
          }
        ],
        "tags": [
          "RoleService"
        ]
      }
    },
    "/api/v0/settings/value-get": {
      "post": {
        "operationId": "GetSettingsValue",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoGetSettingsValueResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoGetSettingsValueRequest"
            }
          }
        ],
        "tags": [
          "ValueService"
        ]
      }
    },
    "/api/v0/settings/value-save": {
      "post": {
        "operationId": "SaveSettingsValue",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoSaveSettingsValueResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoSaveSettingsValueRequest"
            }
          }
        ],
        "tags": [
          "ValueService"
        ]
      }
    },
    "/api/v0/settings/values-list": {
      "post": {
        "operationId": "ListSettingsValues",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/protoListSettingsValuesResponse"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/protoListSettingsValuesRequest"
            }
          }
        ],
        "tags": [
          "ValueService"
        ]
      }
    }
  },
  "definitions": {
    "PermissionSettingConstraint": {
      "type": "string",
      "enum": [
        "CONSTRAINT_UNKNOWN",
        "CONSTRAINT_OWN",
        "CONSTRAINT_SHARED",
        "CONSTRAINT_ALL"
      ],
      "default": "CONSTRAINT_UNKNOWN"
    },
    "protoAddSettingToSettingsBundleRequest": {
      "type": "object",
      "properties": {
        "bundle_id": {
          "type": "string"
        },
        "setting": {
          "$ref": "#/definitions/protoSetting"
        }
      }
    },
    "protoAddSettingToSettingsBundleResponse": {
      "type": "object",
      "properties": {
        "setting": {
          "$ref": "#/definitions/protoSetting"
        }
      }
    },
    "protoAssignRoleToUserRequest": {
      "type": "object",
      "properties": {
        "account_uuid": {
          "type": "string"
        },
        "role_id": {
          "type": "string",
          "title": "the role_id is a bundle_id internally"
        }
      }
    },
    "protoAssignRoleToUserResponse": {
      "type": "object",
      "properties": {
        "assignment": {
          "$ref": "#/definitions/protoUserRoleAssignment"
        }
      }
    },
    "protoBoolSetting": {
      "type": "object",
      "properties": {
        "default": {
          "type": "boolean",
          "format": "boolean"
        },
        "label": {
          "type": "string"
        }
      }
    },
    "protoGetSettingsBundleRequest": {
      "type": "object",
      "properties": {
        "bundle_id": {
          "type": "string"
        }
      }
    },
    "protoGetSettingsBundleResponse": {
      "type": "object",
      "properties": {
        "bundle": {
          "$ref": "#/definitions/protoSettingsBundle"
        }
      }
    },
    "protoGetSettingsValueRequest": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        }
      }
    },
    "protoGetSettingsValueResponse": {
      "type": "object",
      "properties": {
        "value": {
          "$ref": "#/definitions/protoSettingsValueWithIdentifier"
        }
      }
    },
    "protoIdentifier": {
      "type": "object",
      "properties": {
        "extension": {
          "type": "string"
        },
        "bundle": {
          "type": "string"
        },
        "setting": {
          "type": "string"
        }
      }
    },
    "protoIntSetting": {
      "type": "object",
      "properties": {
        "default": {
          "type": "string",
          "format": "int64"
        },
        "min": {
          "type": "string",
          "format": "int64"
        },
        "max": {
          "type": "string",
          "format": "int64"
        },
        "step": {
          "type": "string",
          "format": "int64"
        },
        "placeholder": {
          "type": "string"
        }
      }
    },
    "protoListOption": {
      "type": "object",
      "properties": {
        "value": {
          "$ref": "#/definitions/protoListOptionValue"
        },
        "default": {
          "type": "boolean",
          "format": "boolean"
        },
        "display_value": {
          "type": "string"
        }
      }
    },
    "protoListOptionValue": {
      "type": "object",
      "properties": {
        "string_value": {
          "type": "string"
        },
        "int_value": {
          "type": "string",
          "format": "int64"
        }
      }
    },
    "protoListRoleAssignmentsRequest": {
      "type": "object",
      "properties": {
        "account_uuid": {
          "type": "string"
        }
      }
    },
    "protoListRoleAssignmentsResponse": {
      "type": "object",
      "properties": {
        "assignments": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoUserRoleAssignment"
          }
        }
      }
    },
    "protoListSettingsBundlesRequest": {
      "type": "object",
      "properties": {
        "account_uuid": {
          "type": "string"
        }
      }
    },
    "protoListSettingsBundlesResponse": {
      "type": "object",
      "properties": {
        "bundles": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoSettingsBundle"
          }
        }
      }
    },
    "protoListSettingsValuesRequest": {
      "type": "object",
      "properties": {
        "bundle_id": {
          "type": "string"
        },
        "account_uuid": {
          "type": "string"
        }
      }
    },
    "protoListSettingsValuesResponse": {
      "type": "object",
      "properties": {
        "values": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoSettingsValueWithIdentifier"
          }
        }
      }
    },
    "protoListValue": {
      "type": "object",
      "properties": {
        "values": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoListOptionValue"
          }
        }
      }
    },
    "protoMultiChoiceListSetting": {
      "type": "object",
      "properties": {
        "options": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoListOption"
          }
        }
      }
    },
    "protoPermissionSetting": {
      "type": "object",
      "properties": {
        "operation": {
          "$ref": "#/definitions/protoPermissionSettingOperation"
        },
        "constraint": {
          "$ref": "#/definitions/PermissionSettingConstraint"
        }
      }
    },
    "protoPermissionSettingOperation": {
      "type": "string",
      "enum": [
        "OPERATION_UNKNOWN",
        "OPERATION_CREATE",
        "OPERATION_READ",
        "OPERATION_UPDATE",
        "OPERATION_DELETE"
      ],
      "default": "OPERATION_UNKNOWN"
    },
    "protoRemoveRoleFromUserRequest": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        }
      }
    },
    "protoRemoveSettingFromSettingsBundleRequest": {
      "type": "object",
      "properties": {
        "bundle_id": {
          "type": "string"
        },
        "setting_id": {
          "type": "string"
        }
      }
    },
    "protoResource": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/protoResourceType"
        },
        "id": {
          "type": "string"
        }
      }
    },
    "protoResourceType": {
      "type": "string",
      "enum": [
        "TYPE_UNKNOWN",
        "TYPE_SYSTEM",
        "TYPE_FILE",
        "TYPE_SHARE",
        "TYPE_SETTING",
        "TYPE_BUNDLE",
        "TYPE_USER",
        "TYPE_GROUP"
      ],
      "default": "TYPE_UNKNOWN"
    },
    "protoSaveSettingsBundleRequest": {
      "type": "object",
      "properties": {
        "bundle": {
          "$ref": "#/definitions/protoSettingsBundle"
        }
      }
    },
    "protoSaveSettingsBundleResponse": {
      "type": "object",
      "properties": {
        "bundle": {
          "$ref": "#/definitions/protoSettingsBundle"
        }
      }
    },
    "protoSaveSettingsValueRequest": {
      "type": "object",
      "properties": {
        "value": {
          "$ref": "#/definitions/protoSettingsValue"
        }
      }
    },
    "protoSaveSettingsValueResponse": {
      "type": "object",
      "properties": {
        "value": {
          "$ref": "#/definitions/protoSettingsValue"
        }
      }
    },
    "protoSetting": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "display_name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "int_value": {
          "$ref": "#/definitions/protoIntSetting"
        },
        "string_value": {
          "$ref": "#/definitions/protoStringSetting"
        },
        "bool_value": {
          "$ref": "#/definitions/protoBoolSetting"
        },
        "single_choice_value": {
          "$ref": "#/definitions/protoSingleChoiceListSetting"
        },
        "multi_choice_value": {
          "$ref": "#/definitions/protoMultiChoiceListSetting"
        },
        "permission_value": {
          "$ref": "#/definitions/protoPermissionSetting"
        },
        "resource": {
          "$ref": "#/definitions/protoResource"
        }
      }
    },
    "protoSettingsBundle": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/protoSettingsBundleType"
        },
        "extension": {
          "type": "string"
        },
        "display_name": {
          "type": "string"
        },
        "settings": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoSetting"
          }
        },
        "resource": {
          "$ref": "#/definitions/protoResource"
        }
      }
    },
    "protoSettingsBundleType": {
      "type": "string",
      "enum": [
        "TYPE_UNKNOWN",
        "TYPE_DEFAULT",
        "TYPE_ROLE"
      ],
      "default": "TYPE_UNKNOWN"
    },
    "protoSettingsValue": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "id is the id of the SettingsValue. It is generated on saving it."
        },
        "bundle_id": {
          "type": "string"
        },
        "setting_id": {
          "type": "string",
          "description": "setting_id is the id of the setting from within its bundle."
        },
        "account_uuid": {
          "type": "string"
        },
        "resource": {
          "$ref": "#/definitions/protoResource"
        },
        "bool_value": {
          "type": "boolean",
          "format": "boolean"
        },
        "int_value": {
          "type": "string",
          "format": "int64"
        },
        "string_value": {
          "type": "string"
        },
        "list_value": {
          "$ref": "#/definitions/protoListValue"
        }
      }
    },
    "protoSettingsValueWithIdentifier": {
      "type": "object",
      "properties": {
        "identifier": {
          "$ref": "#/definitions/protoIdentifier"
        },
        "value": {
          "$ref": "#/definitions/protoSettingsValue"
        }
      }
    },
    "protoSingleChoiceListSetting": {
      "type": "object",
      "properties": {
        "options": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protoListOption"
          }
        }
      }
    },
    "protoStringSetting": {
      "type": "object",
      "properties": {
        "default": {
          "type": "string"
        },
        "required": {
          "type": "boolean",
          "format": "boolean"
        },
        "min_length": {
          "type": "integer",
          "format": "int32"
        },
        "max_length": {
          "type": "integer",
          "format": "int32"
        },
        "placeholder": {
          "type": "string"
        }
      }
    },
    "protoUserRoleAssignment": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "id is generated upon saving the assignment"
        },
        "account_uuid": {
          "type": "string"
        },
        "role_id": {
          "type": "string",
          "title": "the role_id is a bundle_id internally"
        }
      }
    }
  },
  "externalDocs": {
    "description": "Developer Manual",
    "url": "http://owncloud.github.io/extensions/ocis_settings/"
  }
}
